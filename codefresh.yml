  version: '1.0'
#https://hooks.slack.com/services/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
  steps:


    build-prj:
      type: build
      description: codefresh example
      image-name: verchol/express-demo
      dockerfile: Dockerfile
      tag: latest

    push-to-registry:
      image: tutum/curl:latest
      commands:
        - curl canhazip.com
        - echo push to registry
            #- curl http://18391060.ngrok.io
           # - curl -X POST -H \'Content-type: application/json\' --data \'{"text":"This is a line of text.\nAnd this is another one."}\'  https://hooks.slack.com/services/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
      description: codefresh example  1


    #push-dockerhub:
     #type: push
     #candidate: ${{build-prj}}
     #tag: awesomeness


    integration tests:
      image: alpine:latest
      commands:
         - ls
         - echo running integration tests
         #- curl http://18391060.ngrok.io
        # - curl -X POST -H \'Content-type: application/json\' --data \'{"text":"This is a line of text.\nAnd this is another one."}\'  https://hooks.slack.com/services/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
      description: codefresh example

    notify:
      image: verchol/slack:latest
      environment:
        - MESSAGE=hello
      commands:
          - sh /scripts/slack.sh
      #   - echo build on commit  ${{CF_BRANCH}}-${{CF_REVISION}} failed
         #- curl http://18391060.ngrok.io
        # - curl -X POST -H 'Content-type: application/json\' --data \'{"text":"This is a line of text.\nAnd this is another one."}\'  https://hooks.slack.com/services/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
      description: codefresh example
